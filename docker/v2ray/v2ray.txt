# image: v2fly/v2fly-core
# docker host config : /etc/v2ray/config.json
# Command: /bin/sh -c
# CMD /usr/bin/v2ray run -c /etc/v2ray/config.json
# -e TZ=Asia/Shanghai 非必须


mkdir -p ~/v2ray
cat <<EOF > ~/v2ray/config.json
{
    "inbounds": [
        {
            "port": 10086, // 服务器监听端口
            "protocol": "vmess",
            "settings": {
                "clients": [
                    {
                        "id": "a9da48c2-e8e5-4f3f-89c7-4141e062b93f"
                    }
                ]
            }
        }
    ],
    "outbounds": [
        {
            "protocol": "freedom"
        }
    ]
}
EOF


docker run -d --name v2ray --restart always \
    -v ~/v2ray/config.json:/etc/v2ray/config.json \
    -p 10086:10086 -p 10086:10086/udp \
    v2fly/v2fly-core run -c /etc/v2ray/config.json



SOCKS5:
a9da48c2:4141e062b93f@sjc1.clusters.zeabur.com:32031

# docker host config : /etc/v2ray/config.json
{
    "inbounds": [
        {
            "port": 10086, // 服务器监听端口
            "protocol": "socks",
            "settings": {
                "auth": "password", // 或 "none" 如果不需要身份验证
                "accounts": [
                  {
                    "user": "a9da48c2",
                    "pass": "4141e062b93f"
                  }
                ],
                "udp": false  // 关闭udp, udp会绕过认证, 不安全
          }
        }
    ],
    "outbounds": [
        {
            "protocol": "freedom"
        }
    ]
}



# Clash.Rev
# 负载均衡
strategy: consistent-hashing # or round-robin
strategy: round-robin

proxy-groups:
  - name: "load-balance"
    type: load-balance
    proxies:
      - ss1
      - ss2
      - vmess1
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
   #lazy: true
   #disable-udp: true
   #strategy: consistent-hashing # or round-robin



# ESC安装

mkdir -p ~/v2ray
cat <<EOF > ~/v2ray/config.json
{
    "inbounds": [
        {
            "port": 20086, // 服务器监听端口
            "protocol": "vmess",
            "settings": {
                "clients": [
                    {
                        "id": "a9da48c2-e8e5-4f3f-89c7-4141e062b93f"
                    }
                ]
            }
        },
        {
            "port": 30086, // 服务器监听端口
            "protocol": "socks",
            "settings": {
                "auth": "password", // 或 "none" 如果不需要身份验证
                "accounts": [
                  {
                    "user": "a9da48c2",
                    "pass": "4141e062b93f"
                  }
                ],
                "udp": false
          }
        }
    ],
    "outbounds": [
        {
            "protocol": "freedom"
        }
    ]
}
EOF


docker run -d --name v2ray --restart always \
    -v ~/v2ray/config.json:/etc/v2ray/config.json \
    -p 20086:20086 -p 30086:30086 \
    v2fly/v2fly-core run -c /etc/v2ray/config.json

